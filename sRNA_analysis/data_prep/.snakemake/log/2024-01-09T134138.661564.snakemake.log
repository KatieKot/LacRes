Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 12
Rules claiming more threads will be scaled down.
Job stats:
job              count    min threads    max threads
-------------  -------  -------------  -------------
all                  1              1              1
extend_reads         7              6              6
noHils_reads        14              6              6
split_strands        7              6              6
total               29              1              6

Select jobs to execute...

[Tue Jan  9 13:41:39 2024]
rule split_strands:
    input: output/FivePoints_1/dedSorted_FivePoints_1.bam
    output: output/FivePoints_1/dedSorted_FivePoints_1_83.bam, output/FivePoints_1/dedSorted_FivePoints_1_99.bam
    jobid: 90
    reason: Missing output files: output/FivePoints_1/dedSorted_FivePoints_1_83.bam, output/FivePoints_1/dedSorted_FivePoints_1_99.bam
    wildcards: sample=FivePoints_1
    threads: 6
    resources: tmpdir=/tmp, mem_gb=20


[Tue Jan  9 13:41:39 2024]
rule extend_reads:
    input: output/FivePoints_1/dedSorted_FivePoints_1.bam
    output: output/FivePoints_1/gr_99_FivePoints_1.bedgraph, output/FivePoints_1/gr_83_FivePoints_1.bedgraph
    jobid: 55
    reason: Code has changed since last execution
    wildcards: sample=FivePoints_1
    threads: 6
    resources: tmpdir=/tmp, mem_gb=10

[Tue Jan  9 13:43:51 2024]
Finished job 90.
1 of 29 steps (3%) done
Select jobs to execute...

[Tue Jan  9 13:43:51 2024]
rule extend_reads:
    input: output/PnG_1/dedSorted_PnG_1.bam
    output: output/PnG_1/gr_99_PnG_1.bedgraph, output/PnG_1/gr_83_PnG_1.bedgraph
    jobid: 19
    reason: Code has changed since last execution
    wildcards: sample=PnG_1
    threads: 6
    resources: tmpdir=/tmp, mem_gb=10

[Tue Jan  9 13:45:57 2024]
Finished job 55.
2 of 29 steps (7%) done
Select jobs to execute...

[Tue Jan  9 13:45:57 2024]
rule split_strands:
    input: output/PnG_1/dedSorted_PnG_1.bam
    output: output/PnG_1/dedSorted_PnG_1_83.bam, output/PnG_1/dedSorted_PnG_1_99.bam
    jobid: 78
    reason: Missing output files: output/PnG_1/dedSorted_PnG_1_99.bam, output/PnG_1/dedSorted_PnG_1_83.bam
    wildcards: sample=PnG_1
    threads: 6
    resources: tmpdir=/tmp, mem_gb=20

[Tue Jan  9 13:47:26 2024]
Finished job 19.
3 of 29 steps (10%) done
Select jobs to execute...

[Tue Jan  9 13:47:26 2024]
rule split_strands:
    input: output/Lys_2/dedSorted_Lys_2.bam
    output: output/Lys_2/dedSorted_Lys_2_83.bam, output/Lys_2/dedSorted_Lys_2_99.bam
    jobid: 87
    reason: Missing output files: output/Lys_2/dedSorted_Lys_2_99.bam, output/Lys_2/dedSorted_Lys_2_83.bam
    wildcards: sample=Lys_2
    threads: 6
    resources: tmpdir=/tmp, mem_gb=20

[Tue Jan  9 13:47:44 2024]
Finished job 78.
4 of 29 steps (14%) done
Select jobs to execute...

[Tue Jan  9 13:47:44 2024]
rule extend_reads:
    input: output/Lys_2/dedSorted_Lys_2.bam
    output: output/Lys_2/gr_99_Lys_2.bedgraph, output/Lys_2/gr_83_Lys_2.bedgraph
    jobid: 46
    reason: Code has changed since last execution
    wildcards: sample=Lys_2
    threads: 6
    resources: tmpdir=/tmp, mem_gb=10

[Tue Jan  9 13:49:21 2024]
Finished job 87.
5 of 29 steps (17%) done
Select jobs to execute...

[Tue Jan  9 13:49:21 2024]
rule noHils_reads:
    input: output/FivePoints_1/dedSorted_FivePoints_1_83.bam
    output: output/FivePoints_1/dedSorted_FivePoints_1_noHils_83.bam
    jobid: 89
    reason: Missing output files: output/FivePoints_1/dedSorted_FivePoints_1_noHils_83.bam; Input files updated by another job: output/FivePoints_1/dedSorted_FivePoints_1_83.bam
    wildcards: sample=FivePoints_1, strand=83
    threads: 6
    resources: tmpdir=/tmp, mem_gb=10

[Tue Jan  9 13:51:37 2024]
Finished job 46.
6 of 29 steps (21%) done
Select jobs to execute...

[Tue Jan  9 13:51:37 2024]
rule extend_reads:
    input: output/PnG_2/dedSorted_PnG_2.bam
    output: output/PnG_2/gr_99_PnG_2.bedgraph, output/PnG_2/gr_83_PnG_2.bedgraph
    jobid: 28
    reason: Code has changed since last execution
    wildcards: sample=PnG_2
    threads: 6
    resources: tmpdir=/tmp, mem_gb=10

[Tue Jan  9 13:55:06 2024]
Finished job 28.
7 of 29 steps (24%) done
Select jobs to execute...

[Tue Jan  9 13:55:06 2024]
rule split_strands:
    input: output/PnG_2/dedSorted_PnG_2.bam
    output: output/PnG_2/dedSorted_PnG_2_83.bam, output/PnG_2/dedSorted_PnG_2_99.bam
    jobid: 81
    reason: Missing output files: output/PnG_2/dedSorted_PnG_2_83.bam, output/PnG_2/dedSorted_PnG_2_99.bam
    wildcards: sample=PnG_2
    threads: 6
    resources: tmpdir=/tmp, mem_gb=20

[Tue Jan  9 13:56:41 2024]
Finished job 81.
8 of 29 steps (28%) done
Select jobs to execute...

[Tue Jan  9 13:56:41 2024]
rule split_strands:
    input: output/Control_2/dedSorted_Control_2.bam
    output: output/Control_2/dedSorted_Control_2_83.bam, output/Control_2/dedSorted_Control_2_99.bam
    jobid: 75
    reason: Missing output files: output/Control_2/dedSorted_Control_2_83.bam, output/Control_2/dedSorted_Control_2_99.bam
    wildcards: sample=Control_2
    threads: 6
    resources: tmpdir=/tmp, mem_gb=20

[Tue Jan  9 13:58:14 2024]
Finished job 75.
9 of 29 steps (31%) done
Select jobs to execute...

[Tue Jan  9 13:58:14 2024]
rule extend_reads:
    input: output/Control_2/dedSorted_Control_2.bam
    output: output/Control_2/gr_99_Control_2.bedgraph, output/Control_2/gr_83_Control_2.bedgraph
    jobid: 10
    reason: Code has changed since last execution
    wildcards: sample=Control_2
    threads: 6
    resources: tmpdir=/tmp, mem_gb=10

[Tue Jan  9 13:59:00 2024]
Finished job 89.
10 of 29 steps (34%) done
Select jobs to execute...

[Tue Jan  9 13:59:00 2024]
rule split_strands:
    input: output/Control_1/dedSorted_Control_1.bam
    output: output/Control_1/dedSorted_Control_1_83.bam, output/Control_1/dedSorted_Control_1_99.bam
    jobid: 72
    reason: Missing output files: output/Control_1/dedSorted_Control_1_83.bam, output/Control_1/dedSorted_Control_1_99.bam
    wildcards: sample=Control_1
    threads: 6
    resources: tmpdir=/tmp, mem_gb=20

[Tue Jan  9 14:00:24 2024]
Finished job 72.
11 of 29 steps (38%) done
Select jobs to execute...

[Tue Jan  9 14:00:24 2024]
rule extend_reads:
    input: output/Control_1/dedSorted_Control_1.bam
    output: output/Control_1/gr_99_Control_1.bedgraph, output/Control_1/gr_83_Control_1.bedgraph
    jobid: 1
    reason: Code has changed since last execution
    wildcards: sample=Control_1
    threads: 6
    resources: tmpdir=/tmp, mem_gb=10

[Tue Jan  9 14:01:20 2024]
Finished job 10.
12 of 29 steps (41%) done
Select jobs to execute...

[Tue Jan  9 14:01:20 2024]
rule noHils_reads:
    input: output/PnG_1/dedSorted_PnG_1_83.bam
    output: output/PnG_1/dedSorted_PnG_1_noHils_83.bam
    jobid: 77
    reason: Missing output files: output/PnG_1/dedSorted_PnG_1_noHils_83.bam; Input files updated by another job: output/PnG_1/dedSorted_PnG_1_83.bam
    wildcards: sample=PnG_1, strand=83
    threads: 6
    resources: tmpdir=/tmp, mem_gb=10

[Tue Jan  9 14:02:59 2024]
Finished job 1.
13 of 29 steps (45%) done
Select jobs to execute...

[Tue Jan  9 14:02:59 2024]
rule noHils_reads:
    input: output/Lys_2/dedSorted_Lys_2_83.bam
    output: output/Lys_2/dedSorted_Lys_2_noHils_83.bam
    jobid: 86
    reason: Missing output files: output/Lys_2/dedSorted_Lys_2_noHils_83.bam; Input files updated by another job: output/Lys_2/dedSorted_Lys_2_83.bam
    wildcards: sample=Lys_2, strand=83
    threads: 6
    resources: tmpdir=/tmp, mem_gb=10

[Tue Jan  9 14:05:55 2024]
Error in rule noHils_reads:
    jobid: 86
    input: output/Lys_2/dedSorted_Lys_2_83.bam
    output: output/Lys_2/dedSorted_Lys_2_noHils_83.bam
    shell:
        
        samtools sort -n -@ 6 output/Lys_2/dedSorted_Lys_2_83.bam > output/Lys_2/single.bam
        samtools view -H output/Lys_2/dedSorted_Lys_2_83.bam > output/Lys_2/header.txt
        samtools view output/Lys_2/dedSorted_Lys_2_83.bam | sort -k1,1 -k4,4n  > output/Lys_2/sam.sam
        cat output/Lys_2/header.txt output/Lys_2/sam.sam| samtools view -bS - -o output/Lys_2/single.bam
        #BAM to BEDPER
        bedtools bamtobed -bedpe -i output/Lys_2/single.bam > output/Lys_2/sorted.bedpe
        #BEDPE to BED6
        cat output/Lys_2/sorted.bedpe | awk '{print $1"	"$2"	"$6"	"$7"	"$8"	"$9}' > output/Lys_2/sorted.bed
        #BEDtoBAM, #sort and index bam
        bedtools bedtobam -i output/Lys_2/sorted.bed -g /mnt/store/annotations/NC_009004/NC_009004.genome | samtools sort -@ 6 | samtools view -h - | sed 's|AS:./input/NC_009004.genome	||g' | sed 's|LN:0|LN:2529478|g' | samtools view -bS - > output/Lys_2/dedSorted_Lys_2_noHils_83.bam
        samtools index output/Lys_2/dedSorted_Lys_2_noHils_83.bam
        rm output/Lys_2/single.bam output/Lys_2/sorted.bed output/Lys_2/sorted.bedpe output/Lys_2/header.txt output/Lys_2/sam.sam
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

[Tue Jan  9 14:05:55 2024]
Error in rule noHils_reads:
    jobid: 77
    input: output/PnG_1/dedSorted_PnG_1_83.bam
    output: output/PnG_1/dedSorted_PnG_1_noHils_83.bam
    shell:
        
        samtools sort -n -@ 6 output/PnG_1/dedSorted_PnG_1_83.bam > output/PnG_1/single.bam
        samtools view -H output/PnG_1/dedSorted_PnG_1_83.bam > output/PnG_1/header.txt
        samtools view output/PnG_1/dedSorted_PnG_1_83.bam | sort -k1,1 -k4,4n  > output/PnG_1/sam.sam
        cat output/PnG_1/header.txt output/PnG_1/sam.sam| samtools view -bS - -o output/PnG_1/single.bam
        #BAM to BEDPER
        bedtools bamtobed -bedpe -i output/PnG_1/single.bam > output/PnG_1/sorted.bedpe
        #BEDPE to BED6
        cat output/PnG_1/sorted.bedpe | awk '{print $1"	"$2"	"$6"	"$7"	"$8"	"$9}' > output/PnG_1/sorted.bed
        #BEDtoBAM, #sort and index bam
        bedtools bedtobam -i output/PnG_1/sorted.bed -g /mnt/store/annotations/NC_009004/NC_009004.genome | samtools sort -@ 6 | samtools view -h - | sed 's|AS:./input/NC_009004.genome	||g' | sed 's|LN:0|LN:2529478|g' | samtools view -bS - > output/PnG_1/dedSorted_PnG_1_noHils_83.bam
        samtools index output/PnG_1/dedSorted_PnG_1_noHils_83.bam
        rm output/PnG_1/single.bam output/PnG_1/sorted.bed output/PnG_1/sorted.bedpe output/PnG_1/header.txt output/PnG_1/sam.sam
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: ../../../../../scratch/kotryna/Giedrius/2016_sRNALactis/data_prep/.snakemake/log/2024-01-09T134138.661564.snakemake.log
