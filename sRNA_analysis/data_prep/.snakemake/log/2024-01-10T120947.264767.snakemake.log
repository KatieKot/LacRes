Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 12
Rules claiming more threads will be scaled down.
Job stats:
job              count    min threads    max threads
-------------  -------  -------------  -------------
all                  1              1              1
extend_reads         1              6              6
noHils_reads        13              6              6
split_strands        1              6              6
total               16              1              6

Select jobs to execute...

[Wed Jan 10 12:09:48 2024]
rule noHils_reads:
    input: output/PnG_1/dedSorted_PnG_1_83.bam
    output: output/PnG_1/dedSorted_PnG_1_noHils_83.bam
    jobid: 77
    reason: Missing output files: output/PnG_1/dedSorted_PnG_1_noHils_83.bam
    wildcards: sample=PnG_1, strand=83
    threads: 6
    resources: tmpdir=/tmp, mem_gb=10


[Wed Jan 10 12:09:48 2024]
rule noHils_reads:
    input: output/Lys_2/dedSorted_Lys_2_83.bam
    output: output/Lys_2/dedSorted_Lys_2_noHils_83.bam
    jobid: 86
    reason: Missing output files: output/Lys_2/dedSorted_Lys_2_noHils_83.bam
    wildcards: sample=Lys_2, strand=83
    threads: 6
    resources: tmpdir=/tmp, mem_gb=10

[Wed Jan 10 12:14:35 2024]
Error in rule noHils_reads:
    jobid: 86
    input: output/Lys_2/dedSorted_Lys_2_83.bam
    output: output/Lys_2/dedSorted_Lys_2_noHils_83.bam
    shell:
        
        samtools sort -n -@ 6 output/Lys_2/dedSorted_Lys_2_83.bam > output/Lys_2/single.bam
        samtools view -H output/Lys_2/dedSorted_Lys_2_83.bam > output/Lys_2/header.txt
        samtools view output/Lys_2/dedSorted_Lys_2_83.bam | sort -k1,1 -k4,4n  > output/Lys_2/sam.sam
        cat output/Lys_2/header.txt output/Lys_2/sam.sam| samtools view -bS - -o output/Lys_2/single.bam
        #BAM to BEDPER
        bedtools bamtobed -bedpe -i output/Lys_2/single.bam > output/Lys_2/sorted.bedpe
        #BEDPE to BED6
        cat output/Lys_2/sorted.bedpe | awk '{print $1"	"$2"	"$6"	"$7"	"$8"	"$9}' > output/Lys_2/sorted.bed
        #BEDtoBAM, #sort and index bam
        bedtools bedtobam -i output/Lys_2/sorted.bed -g /mnt/store/annotations/NC_009004/NC_009004.genome | samtools sort -@ 6 | samtools view -h - | sed 's|AS:./input/NC_009004.genome	||g' | sed 's|LN:0|LN:2529478|g' | samtools view -bS - > output/Lys_2/dedSorted_Lys_2_noHils_83.bam
        samtools index output/Lys_2/dedSorted_Lys_2_noHils_83.bam
        rm output/Lys_2/single.bam output/Lys_2/sorted.bed output/Lys_2/sorted.bedpe output/Lys_2/header.txt output/Lys_2/sam.sam
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

[Wed Jan 10 12:14:35 2024]
Error in rule noHils_reads:
    jobid: 77
    input: output/PnG_1/dedSorted_PnG_1_83.bam
    output: output/PnG_1/dedSorted_PnG_1_noHils_83.bam
    shell:
        
        samtools sort -n -@ 6 output/PnG_1/dedSorted_PnG_1_83.bam > output/PnG_1/single.bam
        samtools view -H output/PnG_1/dedSorted_PnG_1_83.bam > output/PnG_1/header.txt
        samtools view output/PnG_1/dedSorted_PnG_1_83.bam | sort -k1,1 -k4,4n  > output/PnG_1/sam.sam
        cat output/PnG_1/header.txt output/PnG_1/sam.sam| samtools view -bS - -o output/PnG_1/single.bam
        #BAM to BEDPER
        bedtools bamtobed -bedpe -i output/PnG_1/single.bam > output/PnG_1/sorted.bedpe
        #BEDPE to BED6
        cat output/PnG_1/sorted.bedpe | awk '{print $1"	"$2"	"$6"	"$7"	"$8"	"$9}' > output/PnG_1/sorted.bed
        #BEDtoBAM, #sort and index bam
        bedtools bedtobam -i output/PnG_1/sorted.bed -g /mnt/store/annotations/NC_009004/NC_009004.genome | samtools sort -@ 6 | samtools view -h - | sed 's|AS:./input/NC_009004.genome	||g' | sed 's|LN:0|LN:2529478|g' | samtools view -bS - > output/PnG_1/dedSorted_PnG_1_noHils_83.bam
        samtools index output/PnG_1/dedSorted_PnG_1_noHils_83.bam
        rm output/PnG_1/single.bam output/PnG_1/sorted.bed output/PnG_1/sorted.bedpe output/PnG_1/header.txt output/PnG_1/sam.sam
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: ../../../../../scratch/kotryna/Giedrius/2016_sRNALactis/data_prep/.snakemake/log/2024-01-10T120947.264767.snakemake.log
